<!DOCTYPE html>
<html>
<head>
<title>Vendor Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>

body{
font-family:sans-serif;
background:#023047;
color:white;
margin:0;
padding:20px;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
}

.card{
width:100%;
max-width:420px;
background:#034d6d;
padding:22px;
border-radius:14px;
box-shadow:0 6px 20px rgba(0,0,0,.3);
}

h2{text-align:center;color:#FFB703;}

label{font-size:13px;}

input,button{
width:100%;
padding:12px;
margin:8px 0;
border-radius:8px;
border:none;
font-size:14px;
}

input{
background:#022f44;
color:white;
}

button{
background:#FFB703;
color:#023047;
font-weight:bold;
cursor:pointer;
}

.link{
text-align:center;
margin-top:10px;
cursor:pointer;
color:#8ecae6;
}

.doc-box{
background:#022f44;
padding:10px;
border-radius:8px;
font-size:13px;
margin-top:8px;
}

.hidden{display:none;}

hr{
border:none;
border-top:1px solid #8ecae6;
margin:15px 0;
}

</style>
</head>

<body>

<div class="card">

<h2 id="title">Vendor Login</h2>

{% if messages %}
<div style="margin-bottom:10px;">
{% for message in messages %}
<div style="
padding:10px;
border-radius:8px;
margin-bottom:6px;
font-size:13px;
background:{% if message.tags == 'error' %}#c1121f{% else %}#2a9d8f{% endif %};
">
{{ message }}
</div>
{% endfor %}
</div>
{% endif %}

<form method="POST" enctype="multipart/form-data">
{% csrf_token %}

<!-- ================= LOGIN ================= -->
<div id="loginSection">

<label>Aadhaar / PAN</label>
<input type="text" name="login_aadhaar" required>

<label>Password</label>
<input type="password" name="login_password" required>

<button type="submit" name="vendor_login">
Login
</button>

<div class="link" onclick="toggleForm(event)">
Create new account →
</div>

</div>


<!-- ================= SIGNUP ================= -->
<div id="signupSection" class="hidden">

<label>Name</label>
<input type="text" name="signup_name">

<label>Phone</label>
<input type="text" name="signup_phone">

<label>Email</label>
<input type="email" name="signup_email">

<label>Aadhaar / PAN</label>
<input type="text" name="signup_aadhaar">

<label>Password</label>
<input type="password" name="signup_password">

<hr>

<<h3 style="color:#FFB703;">Upload Documents</h3>

<div id="docsContainer">

<div class="doc-box doc-item">

<label>Document Title</label>
<input type="text" name="doc_title[]">

<label>Select File</label>
<input type="file" name="document[]">

<button type="button" onclick="removeDoc(this)"
style="background:#c1121f;color:white;margin-top:6px;">
Remove
</button>

</div>

</div>

<button type="button" onclick="addDoc()"
style="margin-top:10px;background:#2a9d8f;color:white;">
+ Add Document
</button>


<button type="submit" name="vendor_signup">
Create Account
</button>

<div class="link" onclick="toggleForm(event)">
← Back to login
</div>

</div>

</form>

</div>

<script>

function toggleForm(e){

e.preventDefault();

const login=document.getElementById("loginSection");
const signup=document.getElementById("signupSection");
const title=document.getElementById("title");

login.classList.toggle("hidden");
signup.classList.toggle("hidden");

title.innerText =
signup.classList.contains("hidden")
? "Vendor Login"
: "Vendor Signup";

// isolate required validation
toggleRequired(login, !login.classList.contains("hidden"));
toggleRequired(signup, !signup.classList.contains("hidden"));

}

function toggleRequired(section, enable){

section.querySelectorAll("input").forEach(input=>{
if(enable) input.setAttribute("required","required");
else input.removeAttribute("required");
});

}

</script>
<script>

    function addDoc(){
    
    const container = document.getElementById("docsContainer");
    
    const doc = document.createElement("div");
    doc.className = "doc-box doc-item";
    
    doc.innerHTML = `
    <label>Document Title</label>
    <input type="text" name="doc_title[]">
    
    <label>Select File</label>
    <input type="file" name="document[]">
    
    <button type="button" onclick="removeDoc(this)"
    style="background:#c1121f;color:white;margin-top:6px;">
    Remove
    </button>
    `;
    
    container.appendChild(doc);
    
    }
    
    function removeDoc(btn){
    
    btn.parentElement.remove();
    
    }
    
    </script>
    
</body>
</html>
